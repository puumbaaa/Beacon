{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst TimeoutError_1 = require(\"./TimeoutError\");\nconst utils_1 = require(\"./utils\");\nclass PendingOperation {\n  constructor(timeoutMillis) {\n    this.timeoutMillis = timeoutMillis;\n    this.deferred = utils_1.defer();\n    this.possibleTimeoutCause = null;\n    this.isRejected = false;\n    this.promise = timeout(this.deferred.promise, timeoutMillis).catch(err => {\n      if (err instanceof TimeoutError_1.TimeoutError) {\n        if (this.possibleTimeoutCause) {\n          err = new TimeoutError_1.TimeoutError(this.possibleTimeoutCause.message);\n        } else {\n          err = new TimeoutError_1.TimeoutError('operation timed out for an unknown reason');\n        }\n      }\n      this.isRejected = true;\n      return Promise.reject(err);\n    });\n  }\n  abort() {\n    this.reject(new Error('aborted'));\n  }\n  reject(err) {\n    this.deferred.reject(err);\n  }\n  resolve(value) {\n    this.deferred.resolve(value);\n  }\n}\nexports.PendingOperation = PendingOperation;\nfunction timeout(promise, time) {\n  return new Promise((resolve, reject) => {\n    const timeoutHandle = setTimeout(() => reject(new TimeoutError_1.TimeoutError()), time);\n    promise.then(result => {\n      clearTimeout(timeoutHandle);\n      resolve(result);\n    }).catch(err => {\n      clearTimeout(timeoutHandle);\n      reject(err);\n    });\n  });\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","TimeoutError_1","require","utils_1","PendingOperation","constructor","timeoutMillis","deferred","defer","possibleTimeoutCause","isRejected","promise","timeout","catch","err","TimeoutError","message","Promise","reject","abort","Error","resolve","time","timeoutHandle","setTimeout","then","result","clearTimeout"],"sources":["C:/Users/momo1/Documents/@DevPerso/Beacon/node_modules/tarn/dist/PendingOperation.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst TimeoutError_1 = require(\"./TimeoutError\");\r\nconst utils_1 = require(\"./utils\");\r\nclass PendingOperation {\r\n    constructor(timeoutMillis) {\r\n        this.timeoutMillis = timeoutMillis;\r\n        this.deferred = utils_1.defer();\r\n        this.possibleTimeoutCause = null;\r\n        this.isRejected = false;\r\n        this.promise = timeout(this.deferred.promise, timeoutMillis).catch(err => {\r\n            if (err instanceof TimeoutError_1.TimeoutError) {\r\n                if (this.possibleTimeoutCause) {\r\n                    err = new TimeoutError_1.TimeoutError(this.possibleTimeoutCause.message);\r\n                }\r\n                else {\r\n                    err = new TimeoutError_1.TimeoutError('operation timed out for an unknown reason');\r\n                }\r\n            }\r\n            this.isRejected = true;\r\n            return Promise.reject(err);\r\n        });\r\n    }\r\n    abort() {\r\n        this.reject(new Error('aborted'));\r\n    }\r\n    reject(err) {\r\n        this.deferred.reject(err);\r\n    }\r\n    resolve(value) {\r\n        this.deferred.resolve(value);\r\n    }\r\n}\r\nexports.PendingOperation = PendingOperation;\r\nfunction timeout(promise, time) {\r\n    return new Promise((resolve, reject) => {\r\n        const timeoutHandle = setTimeout(() => reject(new TimeoutError_1.TimeoutError()), time);\r\n        promise\r\n            .then(result => {\r\n            clearTimeout(timeoutHandle);\r\n            resolve(result);\r\n        })\r\n            .catch(err => {\r\n            clearTimeout(timeoutHandle);\r\n            reject(err);\r\n        });\r\n    });\r\n}\r\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,MAAMC,cAAc,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AAChD,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAS,CAAC;AAClC,MAAME,gBAAgB,CAAC;EACnBC,WAAWA,CAACC,aAAa,EAAE;IACvB,IAAI,CAACA,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACC,QAAQ,GAAGJ,OAAO,CAACK,KAAK,CAAC,CAAC;IAC/B,IAAI,CAACC,oBAAoB,GAAG,IAAI;IAChC,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB,IAAI,CAACC,OAAO,GAAGC,OAAO,CAAC,IAAI,CAACL,QAAQ,CAACI,OAAO,EAAEL,aAAa,CAAC,CAACO,KAAK,CAACC,GAAG,IAAI;MACtE,IAAIA,GAAG,YAAYb,cAAc,CAACc,YAAY,EAAE;QAC5C,IAAI,IAAI,CAACN,oBAAoB,EAAE;UAC3BK,GAAG,GAAG,IAAIb,cAAc,CAACc,YAAY,CAAC,IAAI,CAACN,oBAAoB,CAACO,OAAO,CAAC;QAC5E,CAAC,MACI;UACDF,GAAG,GAAG,IAAIb,cAAc,CAACc,YAAY,CAAC,2CAA2C,CAAC;QACtF;MACJ;MACA,IAAI,CAACL,UAAU,GAAG,IAAI;MACtB,OAAOO,OAAO,CAACC,MAAM,CAACJ,GAAG,CAAC;IAC9B,CAAC,CAAC;EACN;EACAK,KAAKA,CAAA,EAAG;IACJ,IAAI,CAACD,MAAM,CAAC,IAAIE,KAAK,CAAC,SAAS,CAAC,CAAC;EACrC;EACAF,MAAMA,CAACJ,GAAG,EAAE;IACR,IAAI,CAACP,QAAQ,CAACW,MAAM,CAACJ,GAAG,CAAC;EAC7B;EACAO,OAAOA,CAACrB,KAAK,EAAE;IACX,IAAI,CAACO,QAAQ,CAACc,OAAO,CAACrB,KAAK,CAAC;EAChC;AACJ;AACAD,OAAO,CAACK,gBAAgB,GAAGA,gBAAgB;AAC3C,SAASQ,OAAOA,CAACD,OAAO,EAAEW,IAAI,EAAE;EAC5B,OAAO,IAAIL,OAAO,CAAC,CAACI,OAAO,EAAEH,MAAM,KAAK;IACpC,MAAMK,aAAa,GAAGC,UAAU,CAAC,MAAMN,MAAM,CAAC,IAAIjB,cAAc,CAACc,YAAY,CAAC,CAAC,CAAC,EAAEO,IAAI,CAAC;IACvFX,OAAO,CACFc,IAAI,CAACC,MAAM,IAAI;MAChBC,YAAY,CAACJ,aAAa,CAAC;MAC3BF,OAAO,CAACK,MAAM,CAAC;IACnB,CAAC,CAAC,CACGb,KAAK,CAACC,GAAG,IAAI;MACda,YAAY,CAACJ,aAAa,CAAC;MAC3BL,MAAM,CAACJ,GAAG,CAAC;IACf,CAAC,CAAC;EACN,CAAC,CAAC;AACN","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}